<div id="logo">
    <img src="https://cdn.wallpapersafari.com/60/53/ZjsAkn.jpg" alt="Logo of Eat-Da-Burger!">
</div>

<h1>Eat-da-Burger!</h1>

<h2>Build a Burger</h2>
<form id="build-burger" class="button-size">
    <textarea type="text" name="build"></textarea>
    <button type="submit">Submit Order</button>
</form>

{{!-- This waiting area displays uneaten burgers --}}
<section class="burgers">
    <ul>
        {{#each burgers}}
        {{#unless devoured}}
        {{burger}}
        {{/unless}}
        {{/each}}

        {{!-- {{#each new-burgers}}
        <li>
            <p>
                {{this.id}}. {{this.name}}

                <button data-burgerId="{{this.id}}" class="devour">Devour it!</button>
            </p>
        </li>
        {{/each}} --}}
    </ul>
</section>

{{!-- This section displays eaten burgers  --}}
<section class="devoured">
    <ul>
        {{#each burgers}}
        {{#if devoured}}
        {{burger}}
        {{/if}}
        {{/each}}
        {{!-- {{#each burgers}}
        <li>
            <p>
                {{this.id}}. {{this.name}}
            </p>
        </li>
        {{/each}} --}}
    </ul>
</section>



<h2>Update a Plan</h2>
<form id="updateplan" class="button-size">
    <select name="id">
        {{#each plans}}
        <option value="{{this.id}}">{{this.plan}}</option>
        {{/each}}
    </select>
    <textarea type="text" name="plan" placeholder="plan"></textarea>
    <button type="submit">Update Plan!</button>
</form>

<script type="text/javascript">
    // Make sure we wait to attach our handlers until the DOM is fully loaded.
    $(function () {
        $(".change-sleep").on("click", function (event) {
            var id = $(this).data("id");
            var newSleep = $(this).data("newsleep");

            var newSleepState = {
                sleepy: newSleep
            };

            // Send the PUT request.
            $.ajax("/api/burgers/" + id, {
                type: "PUT",
                data: newSleepState
            }).then(
                function () {
                    console.log("changed sleep to", newSleep);
                    // Reload the page to get the updated list
                    location.reload();
                }
            );
        });

        $(".create-form").on("submit", function (event) {
            // Make sure to preventDefault on a submit event.
            event.preventDefault();

            var newCat = {
                name: $("#ca").val().trim(),
                sleepy: $("[name=sleepy]:checked").val().trim()
            };

            // Send the POST request.
            $.ajax("/api/burgers", {
                type: "POST",
                data: newCat
            }).then(
                function () {
                    console.log("created new cat");
                    // Reload the page to get the updated list
                    location.reload();
                }
            );
        });

        $(".delete-cat").on("click", function (event) {
            var id = $(this).data("id");

            // Send the DELETE request.
            $.ajax("/api/burgers/" + id, {
                type: "DELETE"
            }).then(
                function () {
                    console.log("deleted cat", id);
                    // Reload the page to get the updated list
                    location.reload();
                }
            );
        });
    });



    /////
    /*
        $(".delplan").on("click", function (event) {
            // Get the ID from the button.
            // This is shorthand for $(this).attr("data-planid")
            var id = $(this).data("planid");
    
            // Send the DELETE request.
            $.ajax("/api/plans/" + id, {
                type: "DELETE"
            }).then(
                function () {
                    console.log("deleted id ", id);
                    // Reload the page to get the updated list
                    location.reload();
                }
            );
        });
    
        $("#createplan").on("submit", function (event) {
            // Make sure to preventDefault on a submit event.
            event.preventDefault();
    
            // [name=plan] will find an element with a "name" attribute equal to the string "plan"
            var newPlan = {
                plan: $("#createplan [name=plan]").val().trim()
            };
    
            // Send the POST request.
            $.ajax("/api/plans", {
                type: "POST",
                data: newPlan
            }).then(
                function () {
                    console.log("created new plan");
                    // Reload the page to get the updated list
                    location.reload();
                }
            );
        });
    
        $("#updateplan").on("submit", function (event) {
            // Make sure to preventDefault on a submit event.
            event.preventDefault();
    
            // Get the ID by finding an element with a "name" attribute equal to the string "id"
            var id = $("[name=id]").val().trim();
    
            var updatedPlan = {
                plan: $("#updateplan [name=plan]").val().trim()
            };
    
            // Send the PUT request.
            $.ajax("/api/plans/" + id, {
                type: "PUT",
                data: updatedPlan
            }).then(
                function () {
                    console.log("updated id ", id);
                    // Reload the page to get the updated list
                    location.reload();
                }
            );
        });
    
        */

</script>